<?xml version="1.0" encoding="UTF-8"?>
<action xmlns="http://vmware.com/vco/action" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/action http://vmware.com/vco/action" version="1.0.0" api-version="8.0.0">
  <display-name>Create DNS Record</display-name>
  <description>Creates a DNS A record in Infoblox DNS</description>
  <module>com.acme.infoblox</module>

  <input>
    <param name="hostname" type="string">
      <description>Fully qualified hostname</description>
    </param>
    <param name="ipAddress" type="string">
      <description>IP address for the DNS record</description>
    </param>
  </input>

  <output>
    <param name="recordId" type="string">
      <description>Created DNS record ID</description>
    </param>
  </output>

  <script><![CDATA[
// Infoblox DNS - create A record
// Get Infoblox server connection
var infoblox = System.getModule("com.vmware.library.infoblox").getServer();

// Create DNS A record
var record = {
  name: hostname,
  ipv4addr: ipAddress,
  view: "default"
};

recordId = infoblox.createDNSRecord("record:a", record);

System.log("Created DNS A record in Infoblox: " + recordId);
System.log("  Hostname: " + hostname);
System.log("  IP Address: " + ipAddress);

return recordId;
]]></script>
</action>
